(this["webpackJsonpremote-scoreboard-site"]=this["webpackJsonpremote-scoreboard-site"]||[]).push([[0],{14:function(e,t,a){},8:function(e,t,a){e.exports=a(9)},9:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(2),c=a(4),r=a(3),l=a(5),i=a(0),o=a.n(i),u=a(7),m=a.n(u),h=(a(14),0),d={};function f(e,t){var a=function(e){var t=window.location.host;return fetch("http://"+t+"/api",{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e),method:"POST"})};return t?a(e):new Promise((function(t,n){h&&clearTimeout(h),Object.assign(d,e),h=setTimeout((function(){a(d).then((function(e){return t(e)})).catch((function(e){n(e)})),d={}}),500)}))}function g(e,t){var a={cmd:"obs"};return a.func=e,a.args=t,f(a,!0)}var p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).state={name:"",score:"",id:e.id},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"changeField",value:function(e,t){var a={};a[e]=t,this.setState(a),(a={}).cmd="set",a["p"+this.state.id+e]=t,f(a).catch((function(e){}))}},{key:"onChangeName",value:function(e){this.changeField("name",e.target.value)}},{key:"onResetName",value:function(e){this.changeField("name","")}},{key:"onChangeScore",value:function(e){this.changeField("score",e.target.value)}},{key:"onResetScore",value:function(e){this.changeField("score","0")}},{key:"onClearScore",value:function(e){this.changeField("score","")}},{key:"onSubScore",value:function(e){var t=0;try{t=Math.max(parseInt(this.state.score)-1,0)}catch(a){}isNaN(t)&&(t=0),this.changeField("score",t)}},{key:"onAddScore",value:function(e){var t=1;try{t=parseInt(this.state.score)+1}catch(a){}isNaN(t)&&(t=1),this.changeField("score",t)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"column"},o.a.createElement("div",{className:"field has-addons"},o.a.createElement("div",{className:"control is-expanded"},o.a.createElement("input",{className:"input player",placeholder:"Player "+this.state.id,type:"text",value:this.state.name,onChange:function(t){return e.onChangeName(t)}})),o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-danger",onClick:function(t){return e.onResetName(t)}},o.a.createElement("span",{className:"icon is-small"},o.a.createElement("i",{className:"fas fa-times"}))))),o.a.createElement("div",{className:"content field has-addons"},o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-large",onClick:function(t){return e.onSubScore(t)}},"-")),o.a.createElement("div",{className:"control is-expanded"},o.a.createElement("input",{className:"input is-large",type:"text",value:this.state.score,onChange:function(t){return e.onChangeScore(t)}})),o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-large",onClick:function(t){return e.onAddScore(t)}},"+"))))}}]),t}(o.a.Component),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).state={stage:"",message:"",connected:"Connecting...",selectedScene:"",scenes:[],players:[],playerFilter:""},f({cmd:"login"},!0).then((function(e){a.setState({connected:e.ok?"Connected":"Service error!"}),a.onReset(),g("login").then((function(e){e.json().then((function(e){a.setState({selectedScene:e.selectedScene,scenes:e.scenes})})).catch((function(e){}))})).catch((function(e){}))})).catch((function(e){})),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"changeField",value:function(e,t){var a={};a[e]=t,this.setState(a),a.cmd="set",f(a).catch((function(e){}))}},{key:"onResetMatch",value:function(e){this.refs.player1.onResetName(),this.refs.player2.onResetName(),this.refs.player1.onResetScore(),this.refs.player2.onResetScore()}},{key:"onCasuals",value:function(e){this.refs.player1.onClearScore(),this.refs.player2.onClearScore(),this.changeField("stage","CASUALS")}},{key:"onChangeStage",value:function(e){this.changeField("stage",e.target.value)}},{key:"onResetStage",value:function(e){this.changeField("stage","")}},{key:"onChangeMessage",value:function(e){this.changeField("message",e.target.value)}},{key:"onResetMessage",value:function(e){this.changeField("message","")}},{key:"onReset",value:function(e){this.onResetMatch(),this.onResetStage(),this.onResetMessage()}},{key:"onSelectStage",value:function(e){var t=e.target.getAttribute("data-scene");this.setState({selectedScene:t}),g("SetCurrentScene",{"scene-name":t})}},{key:"onGetChallongePlayers",value:function(e){var t=this;this.setState({players:[]}),function(e,t){var a={cmd:"challonge"};return a.func=e,a.args=t,f(a,!0)}("players",{tournament:this.challongeTournament}).then((function(e){e.json().then((function(e){t.setState({players:e.players})}))})).catch((function(e){}))}},{key:"onResetPlayerFilter",value:function(e){this.setState({playerFilter:""})}},{key:"onChangePlayerFilter",value:function(e){this.setState({playerFilter:e.target.value})}},{key:"onSetPlayer1Name",value:function(e){this.refs.player1.onChangeName({target:{value:document.getElementById("playerName").value}})}},{key:"onSetPlayer2Name",value:function(e){this.refs.player2.onChangeName({target:{value:document.getElementById("playerName").value}})}},{key:"render",value:function(){var e=this,t=[];this.state.scenes&&this.state.scenes.forEach((function(a){var n="button is-light";e.state.selectedScene===a&&(n+=" is-primary is-outlined"),t.push(o.a.createElement("button",{className:n,key:a,"data-scene":a,onClick:function(t){return e.onSelectStage(t)}},a))}));var a=[],n="level-item";return this.state.players.length||(n+=" is-hidden"),this.state.players.forEach((function(t){t.toUpperCase().indexOf(e.state.playerFilter.toUpperCase())>=0&&a.push(o.a.createElement("option",{value:t,key:t},t))})),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"columns"},o.a.createElement(p,{ref:"player1",id:"1"}),o.a.createElement("div",{className:"column is-one-quarter"},o.a.createElement("button",{className:"button is-primary is-fullwidth gap",onClick:function(t){return e.onResetMatch(t)}},"Reset Match"),o.a.createElement("button",{className:"button is-primary is-fullwidth gap",onClick:function(t){return e.onCasuals(t)}},"Casuals")),o.a.createElement(p,{ref:"player2",id:"2"})),o.a.createElement("input",{className:"input is-half-width gap",placeholder:"Stage",type:"text",value:this.state.stage,onChange:function(t){return e.onChangeStage(t)}}),o.a.createElement("textarea",{className:"textarea is-expanded gap",placeholder:"Message",rows:"2",type:"text",value:this.state.message,onChange:function(t){return e.onChangeMessage(t)}}),o.a.createElement("div",{className:"buttons are-medium is-centered"},o.a.createElement("button",{className:"button is-centered is-danger is-medium gap",onClick:function(t){return e.onReset(t)}},"RESET")),o.a.createElement("div",{className:"buttons are-medium is-centered"},t),o.a.createElement("nav",{className:"level gap"},o.a.createElement("div",{className:"level-item"},o.a.createElement("div",{className:"field has-addons"},o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input is-quarter-width",placeholder:"Tournament",onChange:function(t){e.challongeTournament=t.target.value}})),o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.onGetChallongePlayers(t)}},"Fetch Challonge Players")))),o.a.createElement("div",{className:n},o.a.createElement("div",{className:"field has-addons"},o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-danger",onClick:function(t){return e.onResetPlayerFilter(t)}},o.a.createElement("span",{className:"icon is-small"},o.a.createElement("i",{className:"fas fa-times"})))),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",value:this.state.playerFilter,placeholder:"Filter",onChange:function(t){return e.onChangePlayerFilter(t)}})),o.a.createElement("div",{className:"control"},o.a.createElement("div",{className:"select"},o.a.createElement("select",{id:"playerName",ref:"playerName"},a)))),o.a.createElement("button",{className:"button is-primary gap",onClick:function(t){return e.onSetPlayer1Name(t)}},"To P1"),o.a.createElement("button",{className:"button is-primary gap",onClick:function(t){return e.onSetPlayer2Name(t)}},"To P2")))),o.a.createElement("div",{className:"small-text has-text-centered"},this.state.connected))}}]),t}(o.a.Component);m.a.render(o.a.createElement(v,null),document.getElementById("root"))}},[[8,1,2]]]);
//# sourceMappingURL=main.5cdf637d.chunk.js.map